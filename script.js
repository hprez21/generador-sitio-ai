// Language translations
const translations = {
    en: {
        // Main titles and headers
        'main-title': 'AI Website Prompt Generator',
        'subtitle': 'Create detailed prompts to generate your perfect website with AI',
        'business-info-title': 'Business Information',
        'website-type-title': 'Website Type',
        'sections-features-title': 'Sections and Features',
        'design-style-title': 'Design and Style',
        'technical-title': 'Technical Requirements',
        'additional-title': 'Additional Requirements',
        'generated-prompt-title': 'Generated AI Prompt',
        
        // Form labels
        'business-name-label': 'Business Name',
        'business-description-label': 'Business Description',
        'industry-label': 'Industry',
        'website-type-label': 'Type of Website',
        'target-audience-label': 'Target Audience',
        'sections-label': 'Required Sections (check all that apply)',
        'features-label': 'Special Features (check all that apply)',
        'design-style-label': 'Design Style',
        'color-scheme-label': 'Color Scheme Preference',
        'layout-label': 'Layout Preference',
        'responsive-label': 'Responsive Design',
        'seo-label': 'SEO Optimization',
        'accessibility-label': 'Accessibility Features',
        'special-requirements-label': 'Special Requirements or Features',
        'inspiration-label': 'Inspiration or Reference Websites',
        
        // Checkboxes
        'home': 'Home',
        'about': 'About Us',
        'services': 'Services',
        'products': 'Products',
        'portfolio': 'Portfolio',
        'testimonials': 'Testimonials',
        'team': 'Team',
        'blog': 'Blog',
        'contact': 'Contact',
        'faq': 'FAQ',
        'gallery': 'Gallery',
        'pricing': 'Pricing',
        'contact-form': 'Contact Form',
        'newsletter': 'Newsletter Signup',
        'social-media': 'Social Media Links',
        'search': 'Search Functionality',
        'booking': 'Online Booking',
        'chat': 'Live Chat',
        'multilingual': 'Multi-language Support',
        'ecommerce-cart': 'Shopping Cart',
        'user-accounts': 'User Accounts/Login',
        'payment': 'Payment Integration',
        
        // Buttons
        'generate-btn': 'Generate AI Prompt',
        'copy-btn': 'Copy to Clipboard',
        'new-prompt-btn': 'Generate New Prompt',
        
        // Footer
        'footer-text': '© 2025 AI Website Prompt Generator. Made to help you create better websites with AI.',
        
        // Placeholders
        'business-name-placeholder': 'Enter your business name',
        'business-description-placeholder': 'Briefly describe what your business does',
        'target-audience-placeholder': 'e.g., young professionals, families, seniors',
        'color-scheme-placeholder': 'e.g., blue and white, earth tones, vibrant colors',
        'special-requirements-placeholder': 'Any specific features, integrations, or requirements not covered above',
        'inspiration-placeholder': 'List any websites you like or want to use as inspiration',
        
        // Select options
        'select-industry': 'Select industry',
        'select-website-type': 'Select website type',
        'select-design-style': 'Select design style',
        'select-layout': 'Select layout'
    },
    es: {
        // Main titles and headers
        'main-title': 'Generador de Prompts de IA para Sitios Web',
        'subtitle': 'Crea prompts detallados para generar tu sitio web perfecto con IA',
        'business-info-title': 'Información del Negocio',
        'website-type-title': 'Tipo de Sitio Web',
        'sections-features-title': 'Secciones y Características',
        'design-style-title': 'Diseño y Estilo',
        'technical-title': 'Requisitos Técnicos',
        'additional-title': 'Requisitos Adicionales',
        'generated-prompt-title': 'Prompt de IA Generado',
        
        // Form labels
        'business-name-label': 'Nombre del Negocio',
        'business-description-label': 'Descripción del Negocio',
        'industry-label': 'Industria',
        'website-type-label': 'Tipo de Sitio Web',
        'target-audience-label': 'Audiencia Objetivo',
        'sections-label': 'Secciones Requeridas (selecciona todas las aplicables)',
        'features-label': 'Características Especiales (selecciona todas las aplicables)',
        'design-style-label': 'Estilo de Diseño',
        'color-scheme-label': 'Preferencia de Esquema de Colores',
        'layout-label': 'Preferencia de Diseño',
        'responsive-label': 'Diseño Responsivo',
        'seo-label': 'Optimización SEO',
        'accessibility-label': 'Características de Accesibilidad',
        'special-requirements-label': 'Requisitos o Características Especiales',
        'inspiration-label': 'Inspiración o Sitios Web de Referencia',
        
        // Checkboxes
        'home': 'Inicio',
        'about': 'Acerca de',
        'services': 'Servicios',
        'products': 'Productos',
        'portfolio': 'Portafolio',
        'testimonials': 'Testimonios',
        'team': 'Equipo',
        'blog': 'Blog',
        'contact': 'Contacto',
        'faq': 'Preguntas Frecuentes',
        'gallery': 'Galería',
        'pricing': 'Precios',
        'contact-form': 'Formulario de Contacto',
        'newsletter': 'Suscripción al Boletín',
        'social-media': 'Enlaces de Redes Sociales',
        'search': 'Funcionalidad de Búsqueda',
        'booking': 'Reservas en Línea',
        'chat': 'Chat en Vivo',
        'multilingual': 'Soporte Multi-idioma',
        'ecommerce-cart': 'Carrito de Compras',
        'user-accounts': 'Cuentas de Usuario/Login',
        'payment': 'Integración de Pagos',
        
        // Buttons
        'generate-btn': 'Generar Prompt de IA',
        'copy-btn': 'Copiar al Portapapeles',
        'new-prompt-btn': 'Generar Nuevo Prompt',
        
        // Footer
        'footer-text': '© 2025 Generador de Prompts de IA para Sitios Web. Hecho para ayudarte a crear mejores sitios web con IA.',
        
        // Placeholders
        'business-name-placeholder': 'Ingresa el nombre de tu negocio',
        'business-description-placeholder': 'Describe brevemente qué hace tu negocio',
        'target-audience-placeholder': 'ej., profesionales jóvenes, familias, adultos mayores',
        'color-scheme-placeholder': 'ej., azul y blanco, tonos tierra, colores vibrantes',
        'special-requirements-placeholder': 'Cualquier característica, integración o requisito específico no cubierto arriba',
        'inspiration-placeholder': 'Lista cualquier sitio web que te guste o quieras usar como inspiración',
        
        // Select options
        'select-industry': 'Seleccionar industria',
        'select-website-type': 'Seleccionar tipo de sitio web',
        'select-design-style': 'Seleccionar estilo de diseño',
        'select-layout': 'Seleccionar diseño'
    }
};

// Current language
let currentLanguage = 'en';

// DOM Elements
const form = document.getElementById('website-form');
const promptSection = document.getElementById('prompt-section');
const generatedPrompt = document.getElementById('generated-prompt');
const copyBtn = document.getElementById('copy-btn');
const newPromptBtn = document.getElementById('new-prompt-btn');
const langEnBtn = document.getElementById('lang-en');
const langEsBtn = document.getElementById('lang-es');

// Language switching
function switchLanguage(lang) {
    currentLanguage = lang;
    
    // Update active language button
    document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById(`lang-${lang}`).classList.add('active');
    
    // Update page title
    document.documentElement.lang = lang;
    
    // Update all translatable elements
    updateTranslations();
    
    // Update select options
    updateSelectOptions();
    
    // Update placeholders
    updatePlaceholders();
}

function updateTranslations() {
    const elements = document.querySelectorAll('[id]');
    elements.forEach(element => {
        const key = element.id;
        if (translations[currentLanguage][key]) {
            if (element.tagName === 'INPUT' && element.type === 'submit') {
                element.value = translations[currentLanguage][key];
            } else if (element.tagName === 'BUTTON') {
                element.textContent = translations[currentLanguage][key];
            } else {
                element.textContent = translations[currentLanguage][key];
            }
        }
    });
    
    // Update data-translate elements
    const transElements = document.querySelectorAll('[data-translate]');
    transElements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[currentLanguage][key]) {
            element.textContent = translations[currentLanguage][key];
        }
    });
}

function updateSelectOptions() {
    // Industry options
    const industrySelect = document.getElementById('industry');
    const industryOptions = {
        en: {
            '': 'Select industry',
            'technology': 'Technology',
            'healthcare': 'Healthcare',
            'education': 'Education',
            'retail': 'Retail',
            'restaurant': 'Restaurant/Food',
            'real-estate': 'Real Estate',
            'finance': 'Finance',
            'consulting': 'Consulting',
            'creative': 'Creative/Design',
            'fitness': 'Fitness/Wellness',
            'travel': 'Travel/Tourism',
            'automotive': 'Automotive',
            'legal': 'Legal',
            'nonprofit': 'Non-profit',
            'other': 'Other'
        },
        es: {
            '': 'Seleccionar industria',
            'technology': 'Tecnología',
            'healthcare': 'Salud',
            'education': 'Educación',
            'retail': 'Ventas al por menor',
            'restaurant': 'Restaurante/Comida',
            'real-estate': 'Bienes Raíces',
            'finance': 'Finanzas',
            'consulting': 'Consultoría',
            'creative': 'Creativo/Diseño',
            'fitness': 'Fitness/Bienestar',
            'travel': 'Viajes/Turismo',
            'automotive': 'Automotriz',
            'legal': 'Legal',
            'nonprofit': 'Sin fines de lucro',
            'other': 'Otro'
        }
    };
    
    updateSelectElement(industrySelect, industryOptions);
    
    // Website type options
    const websiteTypeSelect = document.getElementById('website-type');
    const websiteTypeOptions = {
        en: {
            '': 'Select website type',
            'business': 'Business/Corporate',
            'ecommerce': 'E-commerce',
            'portfolio': 'Portfolio',
            'blog': 'Blog',
            'landing': 'Landing Page',
            'personal': 'Personal Website',
            'nonprofit': 'Non-profit',
            'educational': 'Educational',
            'news': 'News/Magazine',
            'community': 'Community/Forum'
        },
        es: {
            '': 'Seleccionar tipo de sitio web',
            'business': 'Empresarial/Corporativo',
            'ecommerce': 'Comercio electrónico',
            'portfolio': 'Portafolio',
            'blog': 'Blog',
            'landing': 'Página de aterrizaje',
            'personal': 'Sitio web personal',
            'nonprofit': 'Sin fines de lucro',
            'educational': 'Educativo',
            'news': 'Noticias/Revista',
            'community': 'Comunidad/Foro'
        }
    };
    
    updateSelectElement(websiteTypeSelect, websiteTypeOptions);
    
    // Design style options
    const designStyleSelect = document.getElementById('design-style');
    const designStyleOptions = {
        en: {
            '': 'Select design style',
            'modern': 'Modern',
            'minimalist': 'Minimalist',
            'classic': 'Classic',
            'creative': 'Creative',
            'professional': 'Professional',
            'playful': 'Playful',
            'elegant': 'Elegant',
            'bold': 'Bold',
            'vintage': 'Vintage',
            'futuristic': 'Futuristic'
        },
        es: {
            '': 'Seleccionar estilo de diseño',
            'modern': 'Moderno',
            'minimalist': 'Minimalista',
            'classic': 'Clásico',
            'creative': 'Creativo',
            'professional': 'Profesional',
            'playful': 'Juguetón',
            'elegant': 'Elegante',
            'bold': 'Audaz',
            'vintage': 'Vintage',
            'futuristic': 'Futurista'
        }
    };
    
    updateSelectElement(designStyleSelect, designStyleOptions);
    
    // Layout options
    const layoutSelect = document.getElementById('layout');
    const layoutOptions = {
        en: {
            '': 'Select layout',
            'single-page': 'Single Page',
            'multi-page': 'Multi-page',
            'grid-based': 'Grid-based',
            'full-width': 'Full-width',
            'sidebar': 'With Sidebar',
            'split-screen': 'Split Screen'
        },
        es: {
            '': 'Seleccionar diseño',
            'single-page': 'Página única',
            'multi-page': 'Múltiples páginas',
            'grid-based': 'Basado en cuadrícula',
            'full-width': 'Ancho completo',
            'sidebar': 'Con barra lateral',
            'split-screen': 'Pantalla dividida'
        }
    };
    
    updateSelectElement(layoutSelect, layoutOptions);
    
    // Boolean options
    const responsiveSelect = document.getElementById('responsive');
    const seoSelect = document.getElementById('seo');
    const accessibilitySelect = document.getElementById('accessibility');
    
    const booleanOptions = {
        en: { 'yes': 'Yes', 'no': 'No' },
        es: { 'yes': 'Sí', 'no': 'No' }
    };
    
    updateSelectElement(responsiveSelect, { en: { 'yes': 'Yes (Mobile-friendly)', 'no': 'No' }, es: { 'yes': 'Sí (Compatible con móviles)', 'no': 'No' } });
    updateSelectElement(seoSelect, booleanOptions);
    updateSelectElement(accessibilitySelect, booleanOptions);
}

function updateSelectElement(selectElement, options) {
    const currentValue = selectElement.value;
    selectElement.innerHTML = '';
    
    Object.entries(options[currentLanguage]).forEach(([value, text]) => {
        const option = document.createElement('option');
        option.value = value;
        option.textContent = text;
        if (value === currentValue) {
            option.selected = true;
        }
        selectElement.appendChild(option);
    });
}

function updatePlaceholders() {
    const placeholderMappings = {
        'business-name': 'business-name-placeholder',
        'business-description': 'business-description-placeholder',
        'target-audience': 'target-audience-placeholder',
        'color-scheme': 'color-scheme-placeholder',
        'special-requirements': 'special-requirements-placeholder',
        'inspiration': 'inspiration-placeholder'
    };
    
    Object.entries(placeholderMappings).forEach(([elementId, translationKey]) => {
        const element = document.getElementById(elementId);
        if (element && translations[currentLanguage][translationKey]) {
            element.placeholder = translations[currentLanguage][translationKey];
        }
    });
}

// Prompt generation function
function generatePrompt(formData) {
    const sections = formData.sections.length > 0 ? formData.sections.join(', ') : 'home, about, contact';
    const features = formData.features.length > 0 ? formData.features.join(', ') : 'none specified';
    
    const promptTemplates = {
        en: `Create a comprehensive website for "${formData.businessName}" with the following specifications:

**BUSINESS INFORMATION:**
- Business Name: ${formData.businessName}
- Industry: ${formData.industry || 'not specified'}
- Business Description: ${formData.businessDescription || 'not provided'}
- Target Audience: ${formData.targetAudience || 'general audience'}

**WEBSITE TYPE & STRUCTURE:**
- Website Type: ${formData.websiteType}
- Layout Preference: ${formData.layout || 'flexible'}
- Required Sections: ${sections}

**DESIGN & VISUAL STYLE:**
- Design Style: ${formData.designStyle || 'modern and professional'}
- Color Scheme: ${formData.colorScheme || 'professional and appealing'}
- Responsive Design: ${formData.responsive === 'yes' ? 'Yes, fully mobile-responsive' : 'Desktop-focused'}

**FEATURES & FUNCTIONALITY:**
- Special Features: ${features}
- SEO Optimization: ${formData.seo === 'yes' ? 'Yes, implement SEO best practices' : 'Basic SEO'}
- Accessibility: ${formData.accessibility === 'yes' ? 'Yes, follow WCAG guidelines' : 'Standard accessibility'}

**ADDITIONAL REQUIREMENTS:**
${formData.specialRequirements ? `- Special Requirements: ${formData.specialRequirements}` : ''}
${formData.inspiration ? `- Inspiration/Reference: ${formData.inspiration}` : ''}

**TECHNICAL SPECIFICATIONS:**
- Generate clean, semantic HTML5
- Use modern CSS3 with responsive design principles
- Include JavaScript for interactive elements
- Optimize for performance and user experience
- Ensure cross-browser compatibility

**CONTENT REQUIREMENTS:**
- Create engaging, professional content for all sections
- Use placeholder text that's relevant to the business
- Include appropriate calls-to-action
- Generate realistic contact information and business details
- Create compelling headlines and descriptions

Please provide a complete, functional website with all specified sections and features. Include inline CSS and JavaScript, and ensure the code is well-organized and commented. The website should look professional and be ready for deployment.`,

        es: `Crea un sitio web integral para "${formData.businessName}" con las siguientes especificaciones:

**INFORMACIÓN DEL NEGOCIO:**
- Nombre del Negocio: ${formData.businessName}
- Industria: ${formData.industry || 'no especificada'}
- Descripción del Negocio: ${formData.businessDescription || 'no proporcionada'}
- Audiencia Objetivo: ${formData.targetAudience || 'audiencia general'}

**TIPO Y ESTRUCTURA DEL SITIO WEB:**
- Tipo de Sitio Web: ${formData.websiteType}
- Preferencia de Diseño: ${formData.layout || 'flexible'}
- Secciones Requeridas: ${sections}

**DISEÑO Y ESTILO VISUAL:**
- Estilo de Diseño: ${formData.designStyle || 'moderno y profesional'}
- Esquema de Colores: ${formData.colorScheme || 'profesional y atractivo'}
- Diseño Responsivo: ${formData.responsive === 'yes' ? 'Sí, completamente responsivo para móviles' : 'Enfocado en escritorio'}

**CARACTERÍSTICAS Y FUNCIONALIDAD:**
- Características Especiales: ${features}
- Optimización SEO: ${formData.seo === 'yes' ? 'Sí, implementar mejores prácticas de SEO' : 'SEO básico'}
- Accesibilidad: ${formData.accessibility === 'yes' ? 'Sí, seguir las pautas WCAG' : 'Accesibilidad estándar'}

**REQUISITOS ADICIONALES:**
${formData.specialRequirements ? `- Requisitos Especiales: ${formData.specialRequirements}` : ''}
${formData.inspiration ? `- Inspiración/Referencia: ${formData.inspiration}` : ''}

**ESPECIFICACIONES TÉCNICAS:**
- Generar HTML5 limpio y semántico
- Usar CSS3 moderno con principios de diseño responsivo
- Incluir JavaScript para elementos interactivos
- Optimizar para rendimiento y experiencia de usuario
- Asegurar compatibilidad entre navegadores

**REQUISITOS DE CONTENIDO:**
- Crear contenido atractivo y profesional para todas las secciones
- Usar texto placeholder relevante al negocio
- Incluir llamadas a la acción apropiadas
- Generar información de contacto y detalles comerciales realistas
- Crear titulares y descripciones convincentes

Por favor proporciona un sitio web completo y funcional con todas las secciones y características especificadas. Incluye CSS y JavaScript en línea, y asegúrate de que el código esté bien organizado y comentado. El sitio web debe verse profesional y estar listo para su implementación.`
    };
    
    return promptTemplates[currentLanguage];
}

// Form submission handler
form.addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Collect form data
    const formData = {
        businessName: document.getElementById('business-name').value,
        businessDescription: document.getElementById('business-description').value,
        industry: document.getElementById('industry').value,
        websiteType: document.getElementById('website-type').value,
        targetAudience: document.getElementById('target-audience').value,
        designStyle: document.getElementById('design-style').value,
        colorScheme: document.getElementById('color-scheme').value,
        layout: document.getElementById('layout').value,
        responsive: document.getElementById('responsive').value,
        seo: document.getElementById('seo').value,
        accessibility: document.getElementById('accessibility').value,
        specialRequirements: document.getElementById('special-requirements').value,
        inspiration: document.getElementById('inspiration').value,
        sections: Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
            .filter(cb => ['home', 'about', 'services', 'products', 'portfolio', 'testimonials', 'team', 'blog', 'contact', 'faq', 'gallery', 'pricing'].includes(cb.value))
            .map(cb => cb.value),
        features: Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
            .filter(cb => ['contact-form', 'newsletter', 'social-media', 'search', 'booking', 'chat', 'multilingual', 'ecommerce-cart', 'user-accounts', 'payment'].includes(cb.value))
            .map(cb => cb.value)
    };
    
    // Generate prompt
    const prompt = generatePrompt(formData);
    
    // Display prompt
    generatedPrompt.textContent = prompt;
    promptSection.classList.remove('hidden');
    promptSection.classList.add('fade-in');
    
    // Scroll to prompt section
    promptSection.scrollIntoView({ behavior: 'smooth' });
});

// Copy to clipboard functionality
copyBtn.addEventListener('click', async function() {
    try {
        await navigator.clipboard.writeText(generatedPrompt.textContent);
        
        // Visual feedback
        const originalText = copyBtn.textContent;
        copyBtn.textContent = currentLanguage === 'en' ? 'Copied!' : '¡Copiado!';
        copyBtn.classList.add('copied');
        
        setTimeout(() => {
            copyBtn.textContent = originalText;
            copyBtn.classList.remove('copied');
        }, 2000);
    } catch (err) {
        console.error('Failed to copy text: ', err);
        
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = generatedPrompt.textContent;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        copyBtn.textContent = currentLanguage === 'en' ? 'Copied!' : '¡Copiado!';
        setTimeout(() => {
            copyBtn.textContent = translations[currentLanguage]['copy-btn'];
        }, 2000);
    }
});

// New prompt button
newPromptBtn.addEventListener('click', function() {
    promptSection.classList.add('hidden');
    form.scrollIntoView({ behavior: 'smooth' });
});

// Language switching event listeners
langEnBtn.addEventListener('click', () => switchLanguage('en'));
langEsBtn.addEventListener('click', () => switchLanguage('es'));

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    // Set default language to English
    switchLanguage('en');
    
    // Add smooth transitions
    document.body.style.opacity = '0';
    document.body.style.transition = 'opacity 0.3s ease';
    
    setTimeout(() => {
        document.body.style.opacity = '1';
    }, 100);
});

// Form validation enhancement
document.querySelectorAll('input[required], select[required]').forEach(field => {
    field.addEventListener('blur', function() {
        if (this.value.trim() === '') {
            this.style.borderColor = '#ef4444';
        } else {
            this.style.borderColor = '#059669';
        }
    });
    
    field.addEventListener('input', function() {
        if (this.value.trim() !== '') {
            this.style.borderColor = '#059669';
        }
    });
});

// Auto-save form data to localStorage
function saveFormData() {
    const formData = new FormData(form);
    const data = {};
    
    for (let [key, value] of formData.entries()) {
        data[key] = value;
    }
    
    // Save checkboxes separately
    const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
    data.checkboxes = Array.from(checkboxes).map(cb => cb.value);
    
    localStorage.setItem('websiteGeneratorData', JSON.stringify(data));
}

// Load form data from localStorage
function loadFormData() {
    const savedData = localStorage.getItem('websiteGeneratorData');
    if (savedData) {
        try {
            const data = JSON.parse(savedData);
            
            // Restore form fields
            Object.entries(data).forEach(([key, value]) => {
                const field = document.getElementById(key);
                if (field && key !== 'checkboxes') {
                    field.value = value;
                }
            });
            
            // Restore checkboxes
            if (data.checkboxes) {
                data.checkboxes.forEach(value => {
                    const checkbox = document.querySelector(`input[type="checkbox"][value="${value}"]`);
                    if (checkbox) {
                        checkbox.checked = true;
                    }
                });
            }
        } catch (e) {
            console.error('Error loading saved form data:', e);
        }
    }
}

// Save form data on input
form.addEventListener('input', saveFormData);
form.addEventListener('change', saveFormData);

// Load saved data on page load
document.addEventListener('DOMContentLoaded', loadFormData);
